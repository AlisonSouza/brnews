var FeedFactory=function(b){this.leftHeight=0;this.rightHeight=0;var c={gplus:"col-xs-12 col-sm-5 col-md-5 clearfix"};this.layout=c.gplus;var a=findBootstrapEnvironment();this.isPhone=(a=="xs");this.app=$("#pageloading").length!=0;binding(this.app)};FeedFactory.prototype.append=function(D){for(var y=0;y<D.length;y++){var B=D[y];if(B.source_type=="facebook"){if(B.fb_type!=null&&B.uid_url.indexOf(B.fb_from_id)==0){var v=$("<div>");v.attr("id","_f"+y);v.addClass(this.layout);var q=$("<div>");q.addClass("panel");q.addClass("panel-default");q.appendTo(v);var e=$("<div>");e.addClass("panel-heading");e.addClass("hsource");e.appendTo(q);var h=$("<h4>");h.text(B.fb_from_name);h.appendTo(e);h.addClass("sourcecard");var w=$("<small>");w.appendTo(e);var j=$("<a>");j.attr("href","#");j.text(B.topic);j.appendTo(w);var l=$("<small>");l.text(" - "+when(B.published));l.appendTo(e);l.addClass("ago");var p=$("<div>");p.addClass("panel-body");p.appendTo(q);var m=$("<h4>");var F=$("<p>");var s=B.title?B.title:(B.fb_message?B.fb_message:"");m.text(s);m.appendTo(p);m.addClass("titlecard");var t=$("<div>");t.addClass("rich-content");t.appendTo(p);if(B.fb_pic){var n=$("<div>");n.appendTo(t);var z=$("<div>");z.attr("id","video");z.addClass("hidden");z.appendTo(n);var A=$("<div>");A.attr("id","img");A.appendTo(n);var d=$("<a>");d.addClass("lg");d.attr("href",B.fb_link);d.attr("target","_blank");d.appendTo(A);var E=$("<img>");E.addClass("pull-left");E.attr("src",g(B.fb_pic));E.appendTo(d);E.attr("style","height:250px;");var r=$("<div>");r.addClass("rich-content-holder");r.appendTo(n);var o=$("<h4>");o.appendTo(r);o.addClass("desccard");if(B.description){var k=$("<small>");k.text(B.description.substring(0,255)+"...");k.appendTo(o)}}var c=B.uid_url+B.published;var a=$("<a>");a.text("Compartilhar");a.attr("data-toggle","collapse");a.attr("href","#"+c);a.attr("aria-expanded","false");a.attr("aria-controls",B.uid);a.appendTo(n);var x=C(c);x.appendTo(n);v.appendTo($("#feed"));var u=$(v).height();var b="";if(this.rightHeight<this.leftHeight){b="top:"+this.rightHeight+"px;right:0px";this.rightHeight+=u;v.addClass("pull-right")}else{if(this.leftHeight<=this.rightHeight){b="top:"+this.leftHeight+"px;left:0;";v.addClass("pull-left");this.leftHeight+=u;v.addClass("col-md-offset-1")}}if(this.isPhone){v.attr("style","display:inline-block;")}else{v.attr("style","display:inline-block;position:absolute;"+b)}}}else{if(B.source_type=="google_oauth2"){var v=$("<div>");v.addClass(this.layout);var q=$("<div>");q.addClass("panel");q.addClass("panel-default");q.appendTo(v);var e=$("<div>");e.addClass("panel-heading");e.appendTo(q);var j=$("<a>");j.addClass("pull-right");j.attr("href","#");j.text("more");j.appendTo(e);var h=$("<h4>");h.text(B.ytb_channel_name);h.appendTo(e);var l=$("<small>");l.text(when(B.published));l.appendTo(e);var p=$("<div>");p.addClass("panel-body");p.appendTo(q);var t=$("<div>");t.addClass("rich-content");t.appendTo(p);var n=$("<div>");n.appendTo(t);var z=$("<div>");z.attr("id","video");z.addClass("hidden");z.appendTo(n);var A=$("<div>");A.attr("id","img");A.appendTo(n);var d=$("<a>");d.addClass("lg");d.attr("href","http://www.youtube.com/watch?v="+B.ytb_videoid);d.appendTo(A);var E=$("<img>");if(B.ytb_thumbnail){E.addClass("pull-left");E.attr("src",B.ytb_thumbnail);E.attr("style","height:250px;");E.appendTo(d)}var r=$("<div>");r.addClass("rich-content-holder");r.appendTo(n);var m=$("<h4>");m.text(B.title?B.title:"");m.appendTo(r);var o=$("<h4>");o.appendTo(r);var k=$("<small>");k.text(B.description.substring(0,255));k.appendTo(o);v.appendTo($("#feed"));var u=$(v).height();if(this.rightHeight<this.leftHeight){this.rightHeight+=u;v.attr("style","display:inline-block;float:right")}else{if(this.leftHeight<=this.rightHeight){this.leftHeight+=u;v.attr("style","display:inline-block;float:left")}}}}}function g(f){return f}function C(L){var G=$("<div>");G.addClass("container");G.addClass("social-container");G.addClass("collapse");G.attr("id",L);var K=$("<div>");K.addClass("row-fluid");K.appendTo(G);var I={fb:{name:"Facebook",url:"window.open('https://www.facebook.com/dialog/feed?app_id=524656474329640&display=popup&caption=An%20example%20caption&link=http://www.4linked.com&redirect_uri=http://www.4linked.com/share_redir','','width=600, height=300');return false;"},twt:{name:"Twitter",url:"window.open('https://twitter.com/intent/tweet?url=http://www.4linked.com&via=4Linked&related=', '', 'width=600, height=300');return false;"},gp:{name:"Google+",url:"window.open('https://plus.google.com/share?url=http://www.4linked.com&title=http://www.4linked.com', '', 'width=600, height=300');return false;"},lk:{name:"Linkedin",url:"window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://www.4linked.com&title=http://www.4linked.com&summary=http://www.4linked.com&source=http://www.4linked.com', '', 'width=600, height=300');return false;"},rd:{name:"Reddit",url:"window.open('https://reddit.com/submit?url=http://www.4linked.com&title=http://www.4linked.com/', '', 'width=600, height=300');return false;"},pi:{name:"Pinterest",url:"window.open('https://pinterest.com/pin/create/button/?url=http://www.4linked.com&media=http://www.4linked.com/me.jpg&description=description here', '', 'width=600, height=300');return false;"}};for(var i in I){var J=$("<div>");J.addClass("social-holder");J.appendTo(K);var f=$("<button>");f.addClass("btn-social");f.attr("title","Share to "+I[i].name+". Opens in a new window.");f.attr("data-toolttip-text","Share to "+I[i].name+". Opens in a new window.");f.attr("onclick",I[i].url);var H=$("<span>");H.addClass(i+"social-icon");H.addClass("social-icon");H.addClass("social-sprite");H.appendTo(f);f.appendTo(J)}return G}};function findBootstrapEnvironment(){var b=["xs","sm","md","lg"];$el=$("<div>");$el.appendTo($("body"));for(var a=b.length-1;a>=0;a--){var c=b[a];$el.addClass("hidden-"+c);if($el.is(":hidden")){$el.remove();return c}}}function binding(a){$(document).on("click","a.lg",function(f){f.preventDefault();f.stopPropagation();var b=$(this).attr("href").replace(/&.*$/,"");if(b.indexOf("https://www.youtube.com")==0||b.indexOf("http://www.youtube.com")==0||b.indexOf("http://youtube.com")==0||b.indexOf("https://youtube.com")==0||b.indexOf("https://youtu.be")==0||b.indexOf("http://youtu.be")==0){if(b.indexOf("https://youtu.be")==0||b.indexOf("http://youtu.be")==0){b=b.replace(/https?:\/\/.*\//,"")}else{b=b.replace(/https?:\/\/.*\/watch\?v=/,"")}var d=$(this).parent().parent().find("#video");var c=$("<iframe>",{src:("http://www.youtube.com/embed/"+b+"?autoplay=1"),frameborder:0,scrolling:"no"}).appendTo(d);$(this).parent().closest("#img").fadeOut("fast",function(){$(this).addClass("hidden");$(d).fadeOut("fast",function(){$(d).removeClass("hidden")})})}else{if(a){window.open(b,"_system")}else{window.open(b,"_blank")}}})};